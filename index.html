    <!DOCTYPE html>
    <html lang="en">
    <head>
        
    <link rel="icon" href="favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Poiret+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script> 
    <script src="https://cdn.auth0.com/js/auth0-spa-js/1.0/auth0-spa-js.production.js"></script>
    <link rel="stylesheet" href="style.css">   
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Vision Money Mantra</title>
    </head>
    <body>
    <script type="text/javascript" src="server.js"></script>
    <script type="text/javascript">
        let auth0 = null;
        const fetchAuthConfig = () => fetch("auth_config.json");
        const configureClient = async () => {
        const response = await fetchAuthConfig();
        const config = await response.json();

        auth0 = await createAuth0Client({
            domain: config.domain,
            client_id: config.clientId
        });
    };
    // ..

    window.onload = async () => {
        await configureClient();
    }
    window.onload = async () => {
  await configureClient();

  // NEW - update the UI state
  updateUI();
};

// NEW

const updateUI = async () => { 
  const isAuthenticated = await auth0.isAuthenticated();

  document.getElementById("btn-logout").disabled = !isAuthenticated;
  document.getElementById("btn-login").disabled = isAuthenticated;
  
  // NEW - add logic to show/hide gated content after authentication
  if (isAuthenticated) {
    document.getElementById("gated-content").classList.remove("hidden");

    document.getElementById(
      "ipt-access-token"
    ).innerHTML = await auth0.getTokenSilently();

    document.getElementById("ipt-user-profile").innerHTML = JSON.stringify(
      await auth0.getUser()
    );

  } else {
    document.getElementById("gated-content").classList.add("hidden");
  }
};

// ..

const login = async () => {
  await auth0.loginWithRedirect({
    redirect_uri: window.location.origin
  });
};
// ..

window.onload = async () => {

  // .. code ommited for brevity

  updateUI();

  const isAuthenticated = await auth0.isAuthenticated();

  if (isAuthenticated) {
    // show the gated content
    return;
  }

  // NEW - check for the code and state parameters
  const query = window.location.search;
  if (query.includes("code=") && query.includes("state=")) {

    // Process the login state
    await auth0.handleRedirectCallback();
    
    updateUI();

    // Use replaceState to redirect the user away and remove the querystring parameters
    window.history.replaceState({}, document.title, "/");
  }
};

// ..
const logout = () => {
  auth0.logout({
    returnTo: window.location.origin
  });
};
    </script>
    <style>
    body {
    font-family: Poiret One!important;
    text-align: center;
    }    
    </style>
                  <ul class="navbar-nav d-none d-md-block">
                <!-- Login button: show if NOT authenticated -->
                <li class="nav-item auth-invisible">
                  <button
                    id="qsLoginBtn"
                    onclick="login()"
                    class="btn btn-primary btn-margin auth-invisible hidden"
                  >
                    Log in
                  </button>
                </li>
                <!-- / Login button -->

                <!-- Fullsize dropdown: show if authenticated -->
                <li class="nav-item dropdown auth-visible hidden">
                  <a
                    class="nav-link dropdown-toggle"
                    href="#"
                    id="profileDropDown"
                    data-toggle="dropdown"
                  >
                    <!-- Profile image should be set to the profile picture from the id token -->
                    <img
                      alt="Profile picture"
                      class="nav-user-profile profile-image rounded-circle"
                      width="50"
                    />
                  </a>
                  <div class="dropdown-menu">
                    <!-- Show the user's full name from the id token here -->
                    <div class="dropdown-header nav-user-name user-name"></div>
                    <a
                      href="/profile"
                      class="dropdown-item dropdown-profile route-link"
                    >
                      <i class="fas fa-user mr-3"></i> Profile
                    </a>
                    <a
                      href="#"
                      class="dropdown-item"
                      id="qsLogoutBtn"
                      onclick="logout()"
                    >
                      <i class="fas fa-power-off mr-3"></i> Log out
                    </a>
                  </div>
                </li>
                <!-- /Fullsize dropdown -->
              </ul>
    <h1><span class="title grow">Vision Money Mantra</span></h1>
    <div class="container">
        <div class="jumbotron">
                <h1 class="display-4"><strong>Hello</strong></h1>
                <p class="lead">Welcome!</p>
                <hr class="my-4">
                <p>Welcome to <span class="title grow">Vision Money Mantra</span></p>
            </div>
    </div>
    <div class="panel">
        <div class="inner grow">
            <a href="itr-filing">
                <i class="material-icons">
                folder_open
            </i>
            <p>Fill ITR Returns</p>
            </a>
        </div>
        <div class="inner grow">
            <a href="itr-filing">
                <i class="material-icons">
                folder_open
            </i>
            <p>Fill ITR Returns</p>
            </a>
        </div><div class="inner grow">
            <a href="itr-filing">
                <i class="material-icons">
                folder_open
            </i>
            <p>Fill ITR Returns</p>
            </a>
        </div><div class="inner grow">
            <a href="itr-filing">
                <i class="material-icons">
                folder_open
            </i>
            <p>Fill ITR Returns</p>
            </a>
        </div>
    </div><br><br><br>
    <div class="panel">
        <div class="inner grow">
            <a href="itr-filing">
                <i class="material-icons">
                folder_open
            </i>
            <p>Fill ITR Returns</p>
            </a>
        </div><div class="inner grow">
            <a href="itr-filing">
                <i class="material-icons">
                folder_open
            </i>
            <p>Fill ITR Returns</p>
            </a>
        </div><div class="inner grow">
            <a href="itr-filing">
                <i class="material-icons">
                folder_open
            </i>
            <p>Fill ITR Returns</p>
            </a>
        </div><div class="inner grow">
            <a href="itr-filing">
                <i class="material-icons">
                folder_open
            </i>
            <p>Fill ITR Returns</p>
            </a>
        </div>
        <style type="text/css">
            .hidden {
                display: none;
                font-size: 15px;
            }
        </style>
  <div class="hidden" id="gated-content">
    <p>
      You're seeing this content because you're currently
      <strong>logged in</strong>.
    </p>
    <label>
      Access token:
      <pre id="ipt-access-token"></pre>
    </label>
    <label>
      User profile:
      <pre id="ipt-user-profile"></pre>
    </label>
  </div>
    </div>
    </body>
    </html>